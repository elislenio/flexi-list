/*! crud-table 2015-08-19 */
"use strict";var crudTable=angular.module("crudTable",["flexiList","gettext","ui.bootstrap","treasure-overlay-spinner"]);crudTable.controller("crudTableCtrl",["$scope","gettext","gettextCatalog",function(a,b,c){a.ct.options.lang&&c.setCurrentLanguage(a.ct.options.lang),a.ct.busy=!1,a.ct.page=1,a.$on("flStartOp",function(b,c){a.ct.busy=!0}),a.$on("flComplete",function(b,c){if(a.list.paginationEnabled()){var d=a.list.getPagination();d&&(a.ct.first=d.firstrec,a.ct.last=d.lastrec,a.ct.totalItems=d.rowcount,a.ct.itemsPerPage=d.pagesize,a.ct.maxSize=d.show_pages,a.ct.page!=d.currpage&&(a.ct.page=d.currpage))}a.ct.busy=!1}),a.ct.setSearch=function(b){a.ct.search_field=b},a.ct.colIsSortable=function(b){return 0==b.sortable?!1:a.list.sortEnabled()},a.ct.search=function(){var b=[];a.ct.search_field&&a.ct.search_value&&(b=[{field:a.ct.search_field.field,condition:a.ct.search_field.condition,value:a.ct.search_value,option:a.ct.search_field.option}]),a.list.options.jsonFile?a.list.change({where:b}):a.list.loadData({where:b},!0)},a.ct.sort=function(b,c,d){a.list.options.jsonFile?a.list.change({orderby:[{field:c,type:d}]}):a.list.loadData({orderby:[{field:c,type:d}]})},a.ct.getCheckedStr=function(){return b(a.list.getToggleSelNextState()?"Uncheck all rows":"Check all rows")},a.ct.pageChanged=function(){a.list.changePage(a.ct.page)}}]).directive("crudTable",function(){return{restrict:"E",scope:{list:"=",ct:"="},controller:"crudTableCtrl",templateUrl:function(a,b){return b.template}}}).directive("flFieldDisplay",function(){return{restrict:"E",link:function(a,b,c){a.ct.options.displayField?a.ct.options.displayField(a,b,c):b.html(c.value)}}});